<div class="row" customer-controller>
  <div class="col-md-12">
    <h1 ng-if="ctrl.customer.is_new()">Add a new Customer</h1>
    <h1 ng-if="!ctrl.customer.is_new()">Edit Customer</h1>
  </div>

  <div class="col-md-12"> 
    <form class='form-horizontal smart-form' novalidate ng-submit="ctrl.save()">
      <div class="row">
        <div class="col-md-12">
          <p><span>id</span> #{{ctrl.customer.id}}</p>
        </div>
      </div>
    <div class="row">
      <div class="col-sm-4 " ng-class="{'has-error':ctrl.customer.has_errors('name')}">
        <input type="text" class="form-control" id="customer_name" ng-model='ctrl.customer.name' placeholder="Name">
        <p ng-show="ctrl.customer.has_errors('name')" class='error'>{{ctrl.customer.errors_by_field('name')}}</p>
      </div>
    </div>
    <hr>
    <div class="locations">
      <div class="row">
        <div class="col-md-6">
          <h4 class="not-margin" >Location</h4>
        </div>
        <div class="col-md-6 text-right">
          <button class='btn btn-primary' type='button' ng-click='ctrl.add_location()'><i class="icon-img-pluss"></i> Add location</button>
        </div>
      </div>
      <div class="location" ng-repeat="location in ctrl.customer.locations" ng-hide="location.pending_to_delete()">
        <div ng-hide='location.is_expanded()'>
          <div class="row">
            <div class="col-xs-2">
              <p>default</p>
            </div>
            <div class="col-xs-2 form-group" ng-class="{'has-error':location.has_errors('name')}">
              <input ng-model='location.name' class="form-control" placeholder='name'> 
              <p ng-show="location.has_errors('name')" class='error'>{{location.errors_by_field('name')}}</p>       
            </div>
            <div class="col-xs-2 form-group" ng-class="{'has-error':location.has_errors('city')}">
              <input ng-model='location.city' class="form-control" placeholder='city'>
              <p ng-show="location.has_errors('city')" class='error'>{{location.errors_by_field('city')}}</p>
            </div>
            <div class="col-xs-2 form-group" ng-class="{'has-error':location.has_errors('zip')}">
              <input ng-model='location.zip' class="form-control" placeholder='zip'>
              <p ng-show="location.has_errors('zip')" class='error'>{{location.errors_by_field('zip')}}</p>
           </div>
            <div class="col-xs-3 form-group" ng-class="{'has-error':location.has_errors('phone')}">
              <input ng-model='location.phone' class="form-control" placeholder='Phone'>
              <p ng-show="location.has_errors('phone')" class='error'>{{location.errors_by_field('phone')}}</p>
            </div>
            <div class="col-xs-2 actions">
              <button ng-click="location.expand()" type="button" class="btn btn-success"><i class="glyphicon glyphicon-resize-vertical icon-btn"></i></button>
              <button ng-click="ctrl.customer.delete_location(location)" ng-show='ctrl.customer.has_many_locations()' type="button" class="btn btn-danger"><i class="glyphicon glyphicon-remove "></i></button>

            </div>
          </div>
        </div>

        <div ng-show="location.is_expanded()">

          <div class='row'>
            <div class="col-xs-4 " ng-class="{'has-error':location.has_errors('name')}">
              <input ng-model='location.name' class="form-control" placeholder='Name'>
              <p ng-show="location.has_errors('name')" class='error'>{{location.errors_by_field('name')}}</p>
            </div>
            <div class="col-xs-2 col-xs-offset-6 actions">
              <button ng-click="location.delete()" ng-show='ctrl.customer.has_many_locations()' type="button" class="btn pull-right btn-danger"><i class="glyphicon glyphicon-remove "></i></button>
            </div>
          </div>

          <div class="row">
            <div class="col-xs-4" ng-class="{'has-error':location.has_errors('address1')}">
              <input ng-model='location.address1' class="form-control" placeholder='Street Adreess 1'>
              <p ng-show="location.has_errors('address1')" class='error'>{{location.errors_by_field('address1')}}</p>
              
            </div>
<!--             <div class="col-xs-4">
              <input ng-model='location.on' class="form-control" placeholder='on'>
            </div> -->
            <div class="col-xs-2" ng-class="{'has-error':location.has_errors('country')}">
                <select ng-model="location.country" class="form-control" >
                  <option value="" disabled selected>Country</option>
                  <option selected value="CA">CA</option>
                  <option value="US">US</option>
                  <option value="MX">MX</option>
                </select>
              <p ng-show="location.has_errors('country')" class='error'>{{location.errors_by_field('country')}}</p>
            </div>
            <div class="col-xs-2" ng-class="{'has-error':location.has_errors('country')}">
                <select ng-model="location.state" class="form-control" >
                  <option value="" disabled selected>State</option>
                  <option selected value="CA">CA</option>
                  <option value="US">US</option>
                  <option value="MX">MX</option>
                </select>
              <p ng-show="location.has_errors('country')" class='error'>{{location.errors_by_field('country')}}</p>
            </div>
            <div class="col-xs-2" ng-class="{'has-error':location.has_errors('city')}">
              <input ng-model='location.city' class="form-control" placeholder='City'>
              <p ng-show="location.has_errors('city')" class='error'>{{location.errors_by_field('city')}}</p>
            </div>
            <div class="col-xs-2" ng-class="{'has-error':location.has_errors('zip')}">
              <input ng-model='location.zip' class="form-control" placeholder='zip'>
              <p ng-show="location.has_errors('zip')" class='error'>{{location.errors_by_field('zip')}}</p>
            </div>
          </div>

          <div class='row'>
<!--             <div class="col-xs-4">
              <input ng-model='location.address2' class="form-control" placeholder='Street Adreess 2'>
            </div> -->
          </div>

          <div class='row'>
            <div class="col-xs-4" ng-class="{'has-error':location.has_errors('phone')}">
                <input ng-model='location.phone' class="form-control" placeholder='Phone'>
              <p ng-show="location.has_errors('phone')" class='error'>{{location.errors_by_field('phone')}}</p>
              
            </div>
            <div class="col-xs-4 " ng-class="{'has-error':location.has_errors('email')}">
                <input ng-model='location.email' class="form-control" placeholder='Email'>
              <p ng-show="location.has_errors('email')" class='error'>{{location.errors_by_field('email')}}</p>
            </div>
            <div class="col-xs-4 " ng-class="{'has-error':location.has_errors('fax')}">
              <input ng-model='location.fax' class="form-control" placeholder='Fax'>
              <p ng-show="location.has_errors('fax')" class='error'>{{location.errors_by_field('fax')}}</p>
            </div>
          </div>
          
          <div class="row">
            <div class="col-xs-4">
              <input ng-model='location.freightClass' class="form-control" placeholder='Freight Class'>
            </div>
            <div class="col-xs-4">
              <input ng-model='location.naics' class="form-control" placeholder='NAICS'>
            </div>
            <div class="col-xs-4">
              <div class="col-xs-4">
                <label class="control-label" style="margin-left: -15px;">Role</label>
              </div>
              <div class="col-xs-4">
                <label for="role1" class="control-label not-paddin">Ship</label>
                <input type="checkbox" class="pull-right" id="role1" name="role" value="true" >

                <label for="role2"class="control-label not-paddin">BilTo</label>
                <input type="checkbox" class="pull-right" id="role2" name="role" value="true" >
              </div>
              <div class="col-xs-4">
                <label for="role3" class="control-label not-paddin">Cons</label>
                <input type="checkbox" class="pull-right" id="role3" name="role" value="true" >

                <label for="role4" class="control-label not-paddin">Main</label>
                <input type="checkbox" class="pull-right" id="role4" name="role" value="true" >
              </div>


            </div>
          </div>
          <div class="row">
            <div class="col-xs-4">
                <input ng-model='location.hours' class="form-control" placeholder='Hours of Operation           ex 8am - 9pm'>
            </div>
            <div class="col-xs-4">
              <select ng-model='location.laneCode' class="form-control">
                <option value="" disabled selected>Lane Code</option>
                <option selected >ABC</option>
              </select>
            </div>
            <div class="col-xs-3">
              <label class="control-label">Email Opt Out</label>
              <input type='checkbox' value='true' ng-model='location.emailOptOut'>
            </div>
          </div>
        </div>
        <hr>
      </div>
    </div>
    
    <div class="contacts">
          <div class="row">
            <div class="col-md-6 ">
              <h4 class="not-margin">Contact</h4>
            </div>
            <div class="col-md-6 text-right">
              <button class='btn btn-primary' type='button' ng-click='ctrl.add_contact()'><i class="icon-img-pluss"></i>Add Contact</button>
            </div>
          </div>
      <div class="contact" ng-repeat='contact in ctrl.customer.contacts' >

        <fieldset class="contact" ng-hide="contact.pending_to_delete()">
          <div class="row">
            <div class="col-md-4" ng-class="{'has-error':contact.has_errors('name')}">
              <input ng-model='contact.name' class="form-control" placeholder='Name'>
              <p ng-show="contact.has_errors('name')" class='error'>{{contact.errors_by_field('name')}}</p>
            </div>
            <div class="col-md-4" ng-class="{'has-error':contact.has_errors('email')}">
              <input ng-model='contact.email' class="form-control" placeholder='Email'>
              <p ng-show="contact.has_errors('email')" class='error'>{{contact.errors_by_field('email')}}</p>
            </div>
            <div class="col-md-3" ng-class="{'has-error':contact.has_errors('phone')}">
              <input ng-model='contact.phone' class="form-control" placeholder='Phone'>
              <p ng-show="contact.has_errors('phone')" class='error'>{{contact.errors_by_field('phone')}}</p>
            </div>
            <div class="col-xs-1">
              <button ng-click='ctrl.delete_contact(contact)' ng-show='ctrl.customer.has_many_contacts()' type="button" class="btn btn-danger"><i class="glyphicon glyphicon-remove "></i></button>
            </div>
          </div>
        </fieldset>
      </div>
    </div>
    <hr>
    <div class="billing">
      <div class='row'>
        <div class="col-md-12">
          <h4 class="bill_to" >Credit Information</h4>
        </div>
        <div class="col-xs-4 " ng-class="{'has-error':ctrl.customer.has_errors('creditNote')}">
          <select ng-model="ctrl.customer.creditNote" class="form-control">
            <option value="" disabled selected>Credit Note</option>
            <option value="cod">cod</option>
            <option value="hold">hold</option>
            <option value="availCreditNote">avail credit note</option>
          </select>
          <p ng-show="ctrl.customer.has_errors('creditNote')" class='error'>{{ctrl.customer.errors_by_field('creditNote')}}</p>
        </div>
        <div class="col-xs-4" ng-class="{'has-error':ctrl.customer.has_errors('creditLimit')}">
          <input type="number" ng-model='ctrl.customer.creditLimit' min='0' class="form-control" placeholder='Credit Limit'>
          <p ng-show="ctrl.customer.has_errors('creditLimit')" class='error'>{{ctrl.customer.errors_by_field('creditLimit')}}</p>
          
        </div>
        <div class="col-xs-4 ">
          <label class="col-xs-4 text-v-center">Balance</label>
          <label class="col-xs-8 text-v-center">{{ctrl.customer.balance}}</label>
        </div>
      </div>
      <div class='row'>
        <div class="col-xs-4 ">
            <input ng-model='ctrl.customer.taxId' class="form-control" placeholder='Tax ID'>
        </div>
        <div class="col-xs-4 ">
          <select ng-model="ctrl.customer.invoiceMethod" class="form-control">
            <option value="" disabled selected>Invoice Method</option>
            <option value='email'>email</option>
            <option value='mail'>mail</option>
            <option value='SelfService'>SelfService</option>
          </select>
        </div>
        <div class="col-xs-4 ">
          <label for="requiredPod" class="control-label">requirePOD</label>
          <input type='checkbox' id="requiredPod" ng-model='ctrl.customer.requiredPod'>
        </div>
      </div>
      <div class='row'>
        <div class="col-xs-4">
          <select ng-model="ctrl.customer.currency" class="form-control">
            <option value="" disabled selected>Currency</option>
            <option value="select">CAD</option>
            <option value="select">USD</option>
          </select>
        </div>

        <div class="col-xs-4">
          <select ng-model='ctrl.customer.terms' class="form-control">
            <option value="" disabled selected>Terms</option>
            <option>option</option>
          </select>
        </div>
        <div class="col-xs-4" ng-class="{'has-error':ctrl.customer.has_errors('rating')}">
          <input type='number' class="form-control" min="0" placeholder="Rating" ng-model='ctrl.customer.rating'>
          <p ng-show="ctrl.customer.has_errors('rating')" class='error'>{{ctrl.customer.errors_by_field('rating')}}</p>
        </div>
      </div>
    </div>
    <hr>
    <div class="billing">
      <div class='row'>
        <div class="col-md-12">
          <h4 class="bill_to" >Billing and Customs</h4>
        </div>
        <div class="col-xs-4">
          <select ng-model='ctrl.customer.importCustomsBrokerId' class="form-control">
            <option value="" disabled selected>Import Customs Broker</option>
            <option>entity_id</option>
          </select>
        </div>

        <div class="col-xs-4">
          <select ng-model='ctrl.customer.exportCustomsBrokerId' class="form-control">
            <option value="" disabled selected>Export Customs Broker</option>
            <option>entity_id</option>
          </select>
        </div>

        <div class="col-xs-4">
          <select ng-model='ctrl.customer.currencyRiskFactor' class="form-control">
            <option value="" disabled selected>Currency Risk Factor</option>
            <option>option</option>
          </select>
        </div>
      </div>
      <div class="row">
        <div class='col-xs-4'>
          <div>
            <select ng-model='ctrl.customer.salesRepId' class="form-control">
              <option value="" disabled selected>Sales Representative</option>
              <option>option</option>
            </select>
          </div>
        </div>
        <div class='col-xs-4'>
          <div>
            <select ng-model='ctrl.customer.territoryId' class="form-control">
              <option value="" disabled selected>Territory</option>
              <option>option</option>
            </select>
          </div>        
        </div>
      </div>
    </div>
    <hr>
    <div class="others">
      <div class="row">
        <div class="col-md-12">
          <h4 class="bill_to" >Credit Information</h4>
        </div>
        <div class="col-sm-8">
          <textarea type="email" class="form-control" id="customer_notes" ng-model="ctrl.customer.note" placeholder="Notes"></textarea>
        </div>
      </div>

    </div>
    <div>
      <div class="row">
        <div class="col-md-12  text-center">
          <button class='btn btn-primary'>save</button>
        </div>
      </div>
    </div>
    </form>
  </div>
</div>