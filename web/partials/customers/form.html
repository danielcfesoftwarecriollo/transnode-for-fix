<div customer-controller>
  <div class="alert alert-dismissable alert-danger" ng-show="controller.customer_service.has_errors()">
    <p>{{ controller.customer_service.error }}</p>
  </div>

  <ul class="alert alert-dismissable alert-danger" ng-show="controller.customer.has_errors">
    <li class="error" ng-repeat="error in controller.customer.errors">{{ error }}</li>
  </ul>

  <form class='form-horizontal' novalidate ng-submit="controller.create()">
    <div class="form-group">
      <label for="customer_id" class="col-sm-2 control-label">Id</label>
      <div class="col-sm-10">
        <input type="text" disabled class="form-control" id="customer_id" ng-model='controller.customer.id' placeholder="Id">
      </div>
    </div>
    <div class="form-group">
      <label for="customer_name" class="col-sm-2 control-label">name</label>
      <div class="col-sm-10">
        <input type="text" class="form-control" id="customer_name" ng-model='controller.customer.name' placeholder="name">
      </div>
    </div>

    <div class="form-group has-feedback" ng-class="{'has-error':controller.customer.has_errors('zip')}">
      <label for="customer_zip" class="col-sm-2 control-label">zip</label>
      <div class="col-sm-10">
        <input type="text" class="form-control" id="customer_zip" ng-model='controller.customer.zip' placeholder="zip">
      </div>
      <p ng-show="controller.customer.has_errors('zip')" class='error'>{{controller.customer.errors_by_field('zip')}}</p>
    </div>

    <div class="locations">
      <div class="location" ng-repeat="location in controller.customer.locations">
        <h3>Default location</h3>
      
        <div class='row'>
          <div class="col-xs-4" ng-class="{'has-error':location.has_errors('name')}">
            <input ng-model='location.name' class="form-control" placeholder='full name'>
            <p ng-show="location.has_errors('name')" class='error'>{{location.errors_by_field('name')}}</p>
          </div>
          <div class="col-xs-3" ng-class="{'has-error':location.has_errors('zip')}">
            <input ng-model='location.zip' class="form-control" placeholder='zip'>
            <p ng-show="location.has_errors('zip')" class='error'>{{location.errors_by_field('zip')}}</p>
          </div>          
          <div class="col-xs-4" ng-class="{'has-error':location.has_errors('country')}">
            <label class='control-label'>country</label>
            <select ng-model="location.country" >
              <option value="CA">CA</option>
              <option value="US">US</option>
              <option value="MX">MX</option>
            </select>
            <p ng-show="location.has_errors('country')" class='error'>{{location.errors_by_field('country')}}</p>
            
          </div>
          <div class="col-xs-1">
            <button class='btn delete'type='button' ng-show='controller.customer.has_many_locations()' ng-click='controller.delete_location(location)'>-</button>
          </div>
        </div>

        <div class="row">
          <div class="col-xs-4" ng-class="{'has-error':location.has_errors('address_1')}">
            <input ng-model='location.address_1' class="form-control" placeholder='address 1'>
            <p ng-show="location.has_errors('address_1')" class='error'>{{location.errors_by_field('address_1')}}</p>
            
          </div>
          <div class="col-xs-3">
            <input ng-model='location.on' class="form-control" placeholder='on'>
          </div>
        </div>

        <div class='row'>
          <div class="col-xs-4">
            <input ng-model='location.address_2' class="form-control" placeholder='address 2'>
          </div>
          <div class="col-xs-3" ng-class="{'has-error':location.has_errors('city')}">
            <input ng-model='location.city' class="form-control" placeholder='city'>
            <p ng-show="location.has_errors('city')" class='error'>{{location.errors_by_field('city')}}</p>
          </div>
        </div>

        <div class='row'>
          <div class="col-xs-4" ng-class="{'has-error':location.has_errors('phone')}">
            <label class='control-label'>phone</label>
            <input ng-model='location.phone' class="form-control" placeholder='phone'>
            <p ng-show="location.has_errors('phone')" class='error'>{{location.errors_by_field('phone')}}</p>
            
          </div>
          <div class="col-xs-3" ng-class="{'has-error':location.has_errors('email')}">
            <label class='control-label'>email</label>
            <input ng-model='location.email' class="form-control" placeholder='email'>
            <p ng-show="location.has_errors('email')" class='error'>{{location.errors_by_field('email')}}</p>
            
          </div>
          <div class="col-xs-4">
            <label>fax</label>
            <input ng-model='location.fax' class="form-control" placeholder='email'>
          </div>
        </div>
        <div class='row'>
          <div class="col-xs-8">
            <div class="row">
              <div class="col-xs-4">
                <label>freight class</label>
                <input ng-model='location.freightClass' class="form-control" placeholder='freight class'>
              </div>
              <div class="col-xs-3">
                <label>NAICS</label>
                <input class="form-control" placeholder='naics'>
              </div>
            </div>
            <div class="row">
              <div class="col-xs-4">
                <label>hours</label>
                <input ng-model='location.hours' class="form-control" placeholder='freight class'>
              </div>
              <div class="col-xs-3">
                <label>lane code</label>
                <select ng-model='location.laneCode'>
                  <option>ABC</option>
                </select>
              </div>
              <div class="col-xs-3">
                <label>email opt out</label>
                <select ng-model='location.emailOptOut'>
                  <option>ABC</option>
                </select>
              </div>
            </div>
          </div>
          <div class="col-xs-4">
            <label>role</label>
            <div>
              <label><input type=checkbox ng-model='location.roles["ship"]'>Ship.</label>
              <label><input type=checkbox ng-model='location.roles["billTo"]'>BillTo</label>
              <label><input type=checkbox ng-model='location.roles["cons"]'>Cons</label>
              <label><input type=checkbox ng-model='location.roles["main"]'>Main</label>
           </div>
        </div>
      </div>

      <button class='btn add' type='button' ng-click='controller.add_location()'>Add location</button>
    </div>


    <div class='row'>
      <div class="col-xs-2">
        <label for="customer_credit_note" class="col-sm-6 control-label">credit note</label>
        <select ng-model="controller.customer.creditNote">
          <option value="select">select</option>
        </select>
      </div>
      <div class="col-xs-2">
        <label>credit limit</label>
        <input ng-model='controller.customer.creditLimit' class="form-control" placeholder='Credit Limit'>
      </div>
      <div class="col-xs-2">
        <label>balance</label>
        <p>{{controller.customer.balance}}</p>
      </div>
      <div class="col-xs-3">
        <label>tax id</label>
        <input ng-model='controller.customer.taxId' class="form-control" placeholder='Tax id'>
      </div>

      <div class="col-xs-3">
        <label>invoice</label>
        <select ng-model="controller.customer.invoice">
          <option value='email'>email</option>
          <option value='mail'>mail</option>
          <option value='SelfService'>SelfService</option>
        </select>
      </div>
    </div>

    <div class='row'>
      <div class="col-xs-3">
        <label>requirePOD</label>
        <input type='checkbox' ng-model='controller.customer.requiredPOD'>
      </div>

      <div class="col-xs-3">
        <label for="customer_credit_note" class="col-sm-6 control-label">currency</label>
        <select ng-model="controller.customer.currency">
          <option value="select">CAD</option>
          <option value="select">USD</option>
        </select>
      </div>

      <div class="col-xs-3">
        <label class="control-label">terms</label>
        <select ng-model='controller.customer.terms'>
          <option>option</option>
        </select>
      </div>
      <div class="col-xs-3">
        <label>rating</label>
        <input ng-model='controller.customer.rating'>
      </div>
    </div>

    <div class="bill_to"> BILL TO </div>


    <div class='row'>
      <div class="col-xs-4">
        <label>import customs broker</label>
        <select ng-model='controller.customer.importCustomsBroker'>
          <option>entity_id</option>
        </select>
      </div>

      <div class="col-xs-4">
        <label>export customs broker</label>
        <select ng-model='controller.customer.exportCustomsBroker'>
          <option>entity_id</option>
        </select>
      </div>

      <div class="col-xs-4">
        <label class="control-label">currency risk factor</label>
        <select ng-model='controller.customer.currencyRiskFactor'>
          <option>option</option>
        </select>
      </div>
    </div>
    <div class="row">
      <div class='col-xs-8'>
        <div class="form-group">
          <label for="customer_notes" class="col-sm-2 control-label">Notes</label>
          <div class="col-sm-10">
            <textarea type="email" class="form-control" id="customer_notes" ng-model="controller.customer.note" placeholder="Notes"></textarea>
          </div>
        </div>
      </div>

      <div class='col-xs-4'>
        <div>
          <label>salesrep</label>
          <select ng-model='controller.customer.salesRep'>
            <option>option</option>
          </select>
        </div>
        <div>
          <label>territory</label>
          <select ng-model='controller.customer.territory'>
            <option>option</option>
          </select>
        </div>        
      </div>
    </div>


    <button class='btn btn-success'>save</button>
  </form>
</div>
