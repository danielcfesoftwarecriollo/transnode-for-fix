<div customer-controller>
  <div class="alert alert-dismissable alert-danger" ng-show="controller.customer_service.has_errors()">
    <p>{{ controller.customer_service.error }}</p>
  </div>

  <ul class="alert alert-dismissable alert-danger" ng-show="controller.customer.has_errors">
    <li class="error" ng-repeat="error in controller.customer.errors">{{ error }}</li>
  </ul>

  <form class='form-horizontal' novalidate ng-submit="controller.create()">
    <div class="form-group">
      <label for="customer_code" class="col-sm-2 control-label">code</label>
      <div class="col-sm-10">
        <input type="text" class="form-control" id="customer_code" ng-model='controller.customer.code' placeholder="Code">
      </div>
    </div>
    <div class="form-group">
      <label for="customer_name" class="col-sm-2 control-label">name</label>
      <div class="col-sm-10">
        <input type="text" class="form-control" id="customer_name" ng-model='controller.customer.name' placeholder="name">
      </div>
    </div>

    <div class="contacts">
      <h3>locations</h3>
      <div class="location" ng-repeat="location in controller.customer.locations">
        <div class='row'>
          <div class="col-xs-3">
            <input ng-model='location.name' class="form-control" placeholder='full name'>
          </div>
          <div class="col-xs-4">
            <input ng-model='location.address' class="form-control" placeholder='address'>
          </div>
          <div class="col-xs-4">
            <select ng-model="location.country">
              <option value="CA">CA</option>
              <option value="US">US</option>
              <option value="MX">MX</option>
            </select>
          </div>
          <div class="col-xs-1">
            <button class='btn delete'type='button' ng-show='controller.customer.has_many_locations()' ng-click='controller.delete_location(location)'>-</button>
          </div>
        </div>

        <div class='row'>
          <div class="col-xs-3">
            <input ng-model='location.city' class="form-control" placeholder='city'>
          </div>
          <div class="col-xs-4">
            <input ng-model='location.zip' class="form-control" placeholder='zip'>
          </div>
          <div class="col-xs-4">
            <input ng-model='location.on' class="form-control" placeholder='on'>
          </div>
        </div>

      </div>
      <button class='btn add' type='button' ng-click='controller.add_location()'>Add location</button>
    </div>


    <div class="contacts">
      <h3>contacts</h3>
      <div class="contact" ng-repeat="contact in controller.customer.contacts" ctrl_contact>
        <div class='row'>
          <div class="col-xs-3">
            <input ng-model='contact.name' class="form-control" placeholder='full name'>
          </div>
          <div class="col-xs-4">
            <input ng-model='contact.phone' class="form-control" placeholder='number phone'>

          </div>
          <div class="col-xs-4">
            <input ng-model='contact.email' class="form-control" placeholder='email'>
          </div>
          <div class="col-xs-1">
            <button class='btn delete'type='button' ng-show='controller.customer.has_many_contacts()' ng-click='controller.delete_contact(contact)'>-</button>
          </div>

        </div>
      </div>
      <button class='btn add' type='button' ng-click='controller.add_contact()'>Add contact</button>
    </div>

    <div class='row'>
      <div class="col-xs-3">
        <label for="customer_credit_note" class="col-sm-6 control-label">credit note</label>
        <select ng-model="controller.customer.creditNote">
          <option value="select">select</option>
        </select>
      </div>
      <div class="col-xs-4">
        <input ng-model='controller.customer.creditLimit' class="form-control" placeholder='Credit Limit'>
      </div>
    </div>

    <div class='row'>
      <div class="col-xs-3">
        <label for="customer_credit_note" class="col-sm-6 control-label">currency</label>
        <select ng-model="controller.customer.currency">
          <option value="select">CAD</option>
          <option value="select">USD</option>
        </select>
      </div>
      <div class="col-xs-4">
        <input ng-model='controller.customer.rating' class="form-control" placeholder='Rating'>
      </div>
    </div>

    <div class="form-group">
      <label for="customer_notes" class="col-sm-2 control-label">Notes</label>
      <div class="col-sm-10">
        <textarea type="email" class="form-control" id="customer_notes" ng-model="controller.customer.note" placeholder="Notes"></textarea>
      </div>
   </div>

    <button class='btn btn-success'>save</button>
  </form>
</div>
